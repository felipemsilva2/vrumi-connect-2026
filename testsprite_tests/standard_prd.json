{
  "meta": {
    "project": "Vrumi",
    "date": "2025-11-14",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "Vrumi is a comprehensive study platform designed to prepare users for the Brazilian CNH driving exam. It combines AI-driven personalized content, interactive study tools, and an extensive traffic signs database to offer a modern, accessible, and gamified learning experience.",
  "core_goals": [
    "Democratize access to driver education in Brazil through an intelligent and affordable platform.",
    "Reduce the failure rate in the CNH exam by providing personalized and up-to-date content.",
    "Offer an AI-powered adaptive learning system to analyze errors and generate custom study materials.",
    "Build an engaging community with content sharing, gamification, and social learning features.",
    "Provide a scalable, secure, and accessible platform compliant with Brazilian regulations, including LGPD."
  ],
  "key_features": [
    "User authentication with email, Google OAuth, and session management",
    "Subscription plans with Stripe integration, including free trial and family options",
    "Integrated study room with PDF reader, flashcards generation, and AI chat assistant",
    "Flashcard and quiz systems with performance analytics and spaced repetition",
    "Comprehensive traffic signs library with quizzes and progress tracking",
    "Push and email notifications for study reminders, content updates, and subscription alerts",
    "Administrative dashboards for user, subscription, content, and audit management",
    "AI-driven content generation including explanations, quizzes, summaries, and mind maps",
    "Community features with content sharing, ratings, comments, and gamification",
    "Multi-device responsive UI built with React, TailwindCSS, and Radix UI components"
  ],
  "user_flow_summary": [
    "User registration via email or Google OAuth, followed by email verification and profile setup",
    "Free trial activation and onboarding tutorial",
    "Accessing the study room to select PDFs, read content, and create flashcards or notes",
    "Engaging with AI chat assistant for real-time study help and explanation",
    "Taking quizzes with timers, receiving instant feedback and performance analysis",
    "Subscribing to plans via Stripe checkout to unlock full platform features",
    "Receiving notifications and reminders to maintain study discipline",
    "Using the admin panel for managing users, subscriptions, content, and monitoring audit logs",
    "Sharing flashcards and interacting within the community to enhance engagement"
  ],
  "validation_criteria": [
    "Authentication supports email/password login, Google OAuth, password recovery, and email verification",
    "Payments processed via Stripe with support for multiple plans, free trials, upgrades, and cancellations",
    "PDF reader allows text selection, annotation, and triggers AI-based flashcard generation",
    "Flashcards support creation, spaced repetition study, sharing, and user performance tracking",
    "Quiz system includes multiple-choice questions, timers, immediate feedback, and category-based analytics",
    "AI integration provides personalized content generation and interactive chat support 24/7",
    "Traffic signs catalog is complete, searchable, categorized, and integrated into quizzes and flashcards",
    "Notification system delivers push and email alerts per user preferences",
    "Administrative features include user management, subscription status updates, activity logging, and content moderation",
    "Frontend UI is responsive, accessible, and delivers loading times under 3 seconds",
    "Platform complies with security standards including data encryption, LGPD compliance, and audit logging",
    "KPIs such as conversion rate, churn, user engagement, and study time meet defined targets"
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React 18",
      "Vite",
      "React Router DOM",
      "TailwindCSS",
      "Radix UI",
      "Supabase (Auth, Postgres, Edge Functions / Deno)",
      "Stripe",
      "PDF parsing"
    ],
    "features": [
      {
        "name": "Routing",
        "description": "Navegação do app com React Router, definição de rotas e shell principal.",
        "files": [
          "src/App.tsx",
          "src/main.tsx",
          "src/pages/Index.tsx",
          "src/pages/Dashboard.tsx",
          "src/pages/NotFound.tsx"
        ]
      },
      {
        "name": "Autenticação",
        "description": "Login, verificação de papéis (admin) e sessão via Supabase Auth.",
        "files": [
          "src/pages/Auth.tsx",
          "src/hooks/useIsAdmin.ts",
          "src/integrations/supabase/client.ts"
        ]
      },
      {
        "name": "Cliente Supabase",
        "description": "Inicialização do cliente Supabase e tipos compartilhados.",
        "files": [
          "src/integrations/supabase/client.ts",
          "src/integrations/supabase/types.ts"
        ]
      },
      {
        "name": "Pagamentos",
        "description": "Fluxo de checkout e validação de pagamento com Stripe e funções Supabase.",
        "files": [
          "src/pages/Checkout.tsx",
          "src/pages/CheckoutSuccess.tsx",
          "src/pages/CheckoutCancel.tsx",
          "supabase/functions/create-checkout/index.ts",
          "supabase/functions/verify-payment/index.ts",
          "supabase/functions/stripe-webhook/index.ts"
        ]
      },
      {
        "name": "Flashcards",
        "description": "Visualização e geração de flashcards de estudo.",
        "files": [
          "src/components/dashboard/FlashcardsView.tsx",
          "src/components/traffic-signs/FlashcardMode.tsx",
          "supabase/functions/generate-flashcards/index.ts"
        ]
      },
      {
        "name": "Geração de Questões",
        "description": "Ferramentas administrativas para gerar questões e conteúdo de estudo.",
        "files": [
          "src/pages/AdminQuestions.tsx",
          "supabase/functions/generate-questions/index.ts"
        ]
      },
      {
        "name": "Materiais e PDF",
        "description": "Leitura de PDF, popular materiais e visualizador com anotações.",
        "files": [
          "src/components/study-room/PDFViewer.tsx",
          "src/components/study-room/MobilePDFReader.tsx",
          "supabase/functions/parse-pdf/index.ts",
          "supabase/functions/populate-materiais-from-pdf/index.ts"
        ]
      },
      {
        "name": "Placas de Trânsito",
        "description": "Biblioteca e desafios de placas, importação e progresso.",
        "files": [
          "src/pages/TrafficSignsLibrary.tsx",
          "src/components/traffic-signs/TimedChallenge.tsx",
          "src/components/traffic-signs/ProgressIndicator.tsx",
          "supabase/functions/import-traffic-signs/index.ts"
        ]
      },
      {
        "name": "Administração",
        "description": "Painéis e operações administrativas (usuários, papéis, assinaturas, logs).",
        "files": [
          "src/pages/admin/AdminDashboard.tsx",
          "src/pages/admin/AdminUsers.tsx",
          "src/pages/admin/AdminRoles.tsx",
          "src/pages/admin/AdminSubscriptions.tsx",
          "src/pages/admin/AdminAuditLogs.tsx"
        ]
      },
      {
        "name": "Notificações",
        "description": "Sistema de notificações, agendamento e fallback.",
        "files": [
          "src/components/notifications/NotificationSystem.tsx",
          "src/components/notifications/NotificationSettings.tsx",
          "src/services/NotificationSchedulerService.ts",
          "src/services/NotificationSystemFallback.ts"
        ]
      },
      {
        "name": "Analytics de Estudo",
        "description": "Cálculo de conquistas, progresso e feedback visual.",
        "files": [
          "src/utils/studyAnalytics.ts",
          "src/utils/userProgress.ts",
          "src/components/study/ShareProgress.tsx"
        ]
      },
      {
        "name": "Breadcrumbs e Navegação",
        "description": "Breadcrumb dinâmico e utilitários de navegação.",
        "files": [
          "src/components/SmartBreadcrumb.tsx",
          "src/hooks/useBreadcrumbs.ts",
          "src/utils/navigation.ts"
        ]
      },
      {
        "name": "Auditoria",
        "description": "Registro de auditoria de ações via função dedicada.",
        "files": [
          "src/hooks/useAuditLog.ts",
          "supabase/functions/log-audit/index.ts"
        ]
      },
      {
        "name": "Study Chat",
        "description": "Assistente de estudo via função edge.",
        "files": [
          "supabase/functions/study-chat/index.ts"
        ]
      },
      {
        "name": "UI Base",
        "description": "Biblioteca de componentes UI (Radix + shadcn style).",
        "files": [
          "src/components/ui/button.tsx",
          "src/components/ui/dialog.tsx",
          "src/components/ui/accordion.tsx",
          "src/components/ui/toast.tsx",
          "src/components/ui/tooltip.tsx"
        ]
      },
      {
        "name": "Configuração de Build",
        "description": "Vite, Tailwind e TypeScript configs.",
        "files": [
          "vite.config.ts",
          "tailwind.config.ts",
          "tsconfig.json",
          "tsconfig.app.json",
          "tsconfig.node.json"
        ]
      }
    ]
  }
}
